# 📸 Task 2 & 3 功能展示 - UI/UX 设计说明

## 一、设置面板 UI 设计

### 1. 面板布局

```
┌─────────────────────────────────────────────────────────────┐
│  ⚙️ 系统设置                                          ✕    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📊 记忆容量                                    8 条        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  8 (轻量)       16            24            32 (完整)      │
│                                                             │
│  💡 建议: 记忆越多，AI 越能理解对话背景...                │
│                                                             │
│ ───────────────────────────────────────────────────────────│
│                                                             │
│  🗑️ 清除所有对话                          [清除全部]      │
│                                                             │
│ ───────────────────────────────────────────────────────────│
│                                                             │
│  🖥️ 开发者日志                    [刷新] [显示]            │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 2026-01-29 22:36:54 | INFO | 🎲 [Random] Styles...   │ │
│  │ 2026-01-29 22:36:56 | SUCCESS | ✅ [LLM] Success...  │ │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│ ───────────────────────────────────────────────────────────│
│                                                             │
│  当前会话数: 3                 记忆模式: 轻量               │
│                                                             │
│                     [关闭]                                  │
└─────────────────────────────────────────────────────────────┘
```

### 2. 颜色方案

| 元素 | 颜色 | 用途 |
|------|------|------|
| 背景 | `slate-900` | 主背景色 |
| 边框 | `slate-700` | 分隔线与卡片边框 |
| 主色 | `cyan-400` (#22D3EE) | 记忆深度数字、图标 |
| 滑块激活 | `cyan-500` | 滑块已选择部分 |
| 滑块未激活 | `slate-700` | 滑块未选择部分 |
| 危险操作 | `red-500/20` + `red-400` | 清除按钮背景与文字 |
| 日志背景 | `black` | 终端风格日志区域 |
| 日志文字 | `green-400` | 终端风格日志文本 |

### 3. 动画效果

#### 入场动画
```javascript
// 背景遮罩
initial: { opacity: 0 }
animate: { opacity: 1 }

// 面板卡片
initial: { scale: 0.9, opacity: 0 }
animate: { scale: 1, opacity: 1 }
```

#### 日志展开动画
```javascript
initial: { height: 0, opacity: 0 }
animate: { height: 'auto', opacity: 1 }
```

---

## 二、记忆深度滑块设计

### 视觉呈现

```
记忆容量                                              16 条
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
│←────────青色────────│──────灰色──────→│
8 (轻量)      16            24            32 (完整)
```

### 状态反馈

| 值范围 | 显示文本 | 颜色占比 |
|--------|---------|---------|
| 8-12   | 轻量     | 0-25%   |
| 14-18  | 标准     | 25-50%  |
| 20-28  | 标准+    | 50-85%  |
| 30-32  | 完整     | 85-100% |

### 渐变公式

```css
background: linear-gradient(to right, 
  #06b6d4 0%, 
  #06b6d4 ${((value - 8) / (32 - 8)) * 100}%, 
  #334155 ${((value - 8) / (32 - 8)) * 100}%, 
  #334155 100%)
```

---

## 三、日志查看器设计

### 终端风格

```
┌─────────────────────────────────────────────────────────┐
│ 2026-01-29 22:36:54 | INFO | 🚀 [AIService] Initializing│
│ 2026-01-29 22:36:54 | SUCCESS | ✅ [Config] Model: Qwen │
│ 2026-01-29 22:36:55 | INFO | 🎲 [Random] Styles: ['高冷']│
│ 2026-01-29 22:36:56 | INFO | ⚡ [Request] Input: 我喜欢你│
│ 2026-01-29 22:36:58 | SUCCESS | ✅ [LLM] Generation OK  │
└─────────────────────────────────────────────────────────┘
```

### 日志级别颜色（可选扩展）

| 级别 | 颜色 | Emoji |
|------|------|-------|
| INFO | `green-400` | 📝 🎲 ⚡ |
| SUCCESS | `green-500` | ✅ |
| ERROR | `red-400` | ❌ |
| WARNING | `yellow-400` | ⚠️ |

---

## 四、主界面集成

### 设置按钮位置

```
┌─────────────────────────────────────────────────────────────┐
│  [☰] 恋爱军师                               [⚙️]  [主题]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  对话区域...                                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

点击 `⚙️` 图标 → 打开传统设置页面 → 点击"打开完整设置面板"按钮 → 弹出模态框

### 设置入口样式

```css
.settings-button {
  background: linear-gradient(to right, #06b6d4, #3b82f6);
  color: white;
  padding: 12px;
  border-radius: 8px;
  box-shadow: 0 4px 14px rgba(6, 182, 212, 0.3);
}

.settings-button:hover {
  box-shadow: 0 6px 20px rgba(6, 182, 212, 0.5);
  transform: translateY(-2px);
}
```

---

## 五、响应式设计

### 桌面端 (1920x1080)

```
设置面板宽度: 672px (max-w-2xl)
设置面板高度: 最大 85vh，超出滚动
```

### 笔记本端 (1366x768)

```
设置面板宽度: 600px
设置面板高度: 最大 80vh
```

### 平板端 (768px)

```
设置面板宽度: 90vw
字体缩小: 0.9em
滑块高度: 减小到 4px
```

---

## 六、交互细节

### 1. 记忆深度调节

**用户操作**:
- 拖动滑块
- 点击滑块轨道跳转
- 键盘左右键调节（可选）

**视觉反馈**:
- 数字实时更新
- 颜色渐变流畅变化
- 建议文本动态显示

**状态保存**:
- Zustand persist 自动保存
- 下次打开保持设置

### 2. 日志查看

**初始状态**: 隐藏，按钮显示"显示"

**点击"显示"**:
- 展开动画 (300ms)
- 自动获取日志
- 按钮变为"隐藏"

**点击"刷新"**:
- 按钮旋转动画
- 重新获取日志
- 成功后停止旋转

### 3. 清除会话

**用户点击**:
```javascript
if (confirm('确定要清除所有对话记录吗？此操作不可撤销。')) {
  createNewSession(); // 重置为空会话
}
```

**防误触机制**:
- 原生 confirm 对话框
- 明确提示不可撤销
- 可选：3秒倒计时取消按钮（未实现）

---

## 七、可访问性设计

### 1. 键盘导航

- `Tab`: 在控件间切换
- `Enter/Space`: 激活按钮
- `Left/Right`: 调节滑块（原生支持）
- `Esc`: 关闭面板

### 2. 屏幕阅读器支持

```html
<label htmlFor="memory-slider">记忆容量</label>
<input 
  id="memory-slider"
  type="range" 
  aria-label="记忆深度设置"
  aria-valuemin="8"
  aria-valuemax="32"
  aria-valuenow={memoryMax}
/>
```

### 3. 对比度

- 文字与背景对比度 ≥ 4.5:1 (WCAG AA)
- 青色 (#22D3EE) 在深色背景上清晰可见
- 红色警告按钮对比度足够

---

## 八、性能优化

### 1. 日志懒加载

```javascript
// 仅在显示时获取
useEffect(() => {
  if (isOpen && showLogs) {
    fetchLogs(100);
  }
}, [isOpen, showLogs]);
```

### 2. 防抖刷新

```javascript
const debouncedFetchLogs = debounce(fetchLogs, 500);
```

### 3. 虚拟滚动（可选）

对于超长日志，可以实现虚拟滚动：
```javascript
import { FixedSizeList } from 'react-window';
```

---

## 九、扩展计划

### Phase 1 (已完成)
- ✅ 记忆深度滑块
- ✅ 日志查看器
- ✅ 清除会话

### Phase 2 (可选)
- ⏳ 历史记录可视化时间线
- ⏳ 日志过滤器 (按级别/关键词)
- ⏳ 导出对话记录 (JSON/Markdown)

### Phase 3 (未来)
- ⏳ 记忆策略选择 (完整/摘要/智能)
- ⏳ 实时日志流 (WebSocket)
- ⏳ 性能监控面板

---

## 十、设计灵感来源

- **Vercel Dashboard**: 玻璃态卡片设计
- **Gemini Settings**: 简洁的滑块控件
- **VS Code Terminal**: 终端风格日志展示
- **GitHub Actions Logs**: 日志格式与刷新机制

---

**设计版本**: v2.1  
**设计师**: GitHub Copilot  
**实现日期**: 2026-01-29
