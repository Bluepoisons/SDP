# 快速测试指南 - v3.0 沉浸式情感交互

## 🚀 快速启动

### 1️⃣ 启动后端
```bash
cd backend
uvicorn main:app --reload
```

### 2️⃣ 启动前端
```bash
cd client
npm run dev
```

## ✅ 视觉检查清单

访问 `http://localhost:5173` 后：

### 主界面 (AppLayout/ChatStream)
- [ ] 看到选项卡片左上角有 `❤ +2` 或 `💔 -1` 徽章
- [ ] 卡片颜色根据分数变化（粉色/青色/紫色）
- [ ] 颜文字在右下角独立显示（小字，半透明）
- [ ] Hover 时卡片有发光效果
- [ ] 看不到"傲娇""谄媚""中二"等风格文字

### 全屏选择模式 (ChoiceMatrix)
- [ ] 三个选项颜色不同（根据 score）
- [ ] 选中后有白色光晕
- [ ] 背景有巨大的半透明颜文字水印

### Dashboard 快速测试面板
- [ ] 输入文本生成选项后使用新卡片
- [ ] 每个选项显示好感度分数

## 🧪 功能测试

### 测试用例 1：高分选项
输入：**"今天想你了"**

**预期**：
- 至少有 1 个选项是 `+2` 或 `+3`
- 该选项卡片为**粉色边框**
- 徽章显示 `❤ +2` 或 `❤ +3`
- Hover 时有粉色发光

### 测试用例 2：负分选项
输入：**"你怎么还不回我消息？"**

**预期**：
- 可能有低分选项（-1/-2/-3）
- 低分卡片为**紫色边框**
- 徽章显示 `💔 -2` 等
- 如果是 -3，右上角有 "⚠️ 危险" 标识

### 测试用例 3：颜文字分离
查看任一选项：
- 正文区域**不包含** `(≧∇≦)` 等符号
- 颜文字单独在右下角
- 背景水印是放大版的颜文字

## 🐛 常见问题

### 问题：卡片还是显示"傲娇""谄媚"
**原因**：前端缓存未清除  
**解决**：`Ctrl + Shift + R` 硬刷新

### 问题：颜文字还在正文里
**原因**：后端未重启或 AI 未遵循新 Prompt  
**解决**：
1. 重启后端 `uvicorn main:app --reload`
2. 清除浏览器缓存
3. 检查 Network 标签的 API 响应是否有 `kaomoji` 字段

### 问题：所有卡片都是青色
**原因**：AI 生成的 score 都是 0 或 1  
**解决**：这是正常的，AI 可能认为所有回复都比较中性。可以在 Prompt 中强调分数多样性。

## 📊 验收标准

- ✅ 100% 移除风格文字（"傲娇""谄媚""中二"等）
- ✅ 100% 显示好感度分数（❤ +2 / 💔 -1 等）
- ✅ 100% 颜文字独立呈现（不与正文混合）
- ✅ 颜色映射准确（粉色=高分，紫色=低分，青色=中性）
- ✅ 交互动效流畅（Hover 发光、选中缩放）

---

**测试时间**: ________  
**测试人**: ________  
**结果**: ☐ 通过 / ☐ 需修复  
**备注**: ___________________________
